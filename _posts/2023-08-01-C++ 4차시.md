---
layout: single
title:  "2023 C++ 학습하기 4차시"
categories: coding
author_profile: false
output:
  html_document :
    toc: true
    toc_sticky: true
    toc_depth: 2
---

<head>
  <style>
    Toc{
      top:20%;
    }
    
    table.dataframe {
      white-space: normal;
      width: 100%;
      height: 240px;
      display: block;
      overflow: auto;
      font-family: Arial, sans-serif;
      font-size: 0.9rem;
      line-height: 20px;
      text-align: center;
      border: 0px !important;
    }

    table.dataframe th {
      text-align: center;
      font-weight: bold;
      padding: 8px;
    }

    table.dataframe td {
      text-align: center;
      padding: 8px;
    }

    table.dataframe tr:hover {
      background: #b8d1f3; 
    }

    .output_prompt {
      overflow: auto;
      font-size: 0.9rem;
      line-height: 1.45;
      border-radius: 0.3rem;
      -webkit-overflow-scrolling: touch;
      padding: 0.8rem;
      margin-top: 0;
      margin-bottom: 15px;
      font: 1rem Consolas, "Liberation Mono", Menlo, Courier, monospace;
      color: $code-text-color;
      border: solid 1px $border-color;
      border-radius: 0.3rem;
      word-break: normal;
      white-space: pre;
    }

  .dataframe tbody tr th:only-of-type {
      vertical-align: middle;
  }

  .dataframe tbody tr th {
      vertical-align: top;
  }

  .dataframe thead th {
      text-align: center !important;
      padding: 8px;
  }

  .page__content p {
      margin: 0 0 0px !important;
  }

  .page__content p > strong {
    font-size: 0.8rem !important;
  }

  </style>
</head>

# 10장 객체와 클래스

객체 지향 프로그래밍(OOP)은 프로그램 설계 방법중 하나이다.

C++은 객체 지향 프로그래밍을 쉽게 구현할 수 있도록 만든 프로그래밍 언어이다.

다음은 OOP의 가장 중요한 기능들이다.

* 추상화(abstraction)

* 캡슐화(encapsulation)와 데이터 은닉(data hiding)

* 다형(polymorphism)

* 상속(inheritance)

* 코드의 재활용(reusability of code)

클래스는 이러한 기능들을 구현하고 결합하는 데 사용되는 가장 중요한 C++ 도구이다.

이 장에서는 클래스가 무엇인지 알아본 후 OOP의 기능들을 설명한다.

## 10.1 절차식 프로그래밍과 객체 지향 프로그래밍

절차적 접근 방식은 처리해야 할 절차에 초점을 맞추고 데이터를 표현할 방법을 찾는다.

OOP 접근 방식은 객체를 서술하는 데 필요한 데이터와, 사용자가 그 데이터를 다루는 방법에 대해서 생각하며 사용자가 이해하는 방식대로 객체에 초점을 맞춘다.

이러한 인터페이스를 설계한 후 인터페이스와 데이터 저장 형태을 구현한다.

## 10.2 추상화와 클래스

컴퓨터 분야에서 추상화란 정보를 사용자 인터페이스로 표현하는 것이다.

즉, 어떤 문제에 대해 필수적인 조작적 요인을 추상화하고 해결책을 표현하는 것이다.

클래스가 추상화 인터페이스를 구현하는 정의 데이터형이다.

### 데이터형이란 무엇인가?

데이터형은 메모리에 저장되는 형태 뿐만 아니라 그것을 대상으로 수행할 수 있는 연산에 의해 정의된다.

int형은 사칙연산, 나머지 연산자까지 사용 가능하지만 포인터는 int형에 적용할 수 있는 연산을 허용하지 않는다.

어떤 변수를 선언한다고 할 때 단지 메모리 대입이 아닌 그 데이터형이 수행할 수 있는 연산도 함께 정의 된다는 것이다.

쉽게 말해 기본형을 서술하는 것은 다음과 같은 세 가지를 결정하는 것이다.

* 데이터 객체에 필요한 메모리의 크기를 결정한다.

* 메모리에 있는 비트들을 어떻게 해석할 것인지 결정한다. (long 값과 float 값이 메모리에서 동일한 비트를 사용해도 서로 다른 수치 값으로 해석)

* 데이터 객체를 사용하여 수행할 수 있는 연산이나 메소드를 결정한다.

내장된 기본 데이터형은 동작에 관한 정보가 컴파일러에 내장된다.

그러나 사용자 정의 데이터형은 이와 같은 정보를 직접 제공해야 한다.

### C++의 클래스

클래스는 추상화를 사용자 정의 데이터형으로 변환해 주는 C++의 수단이다.

클래스는 데이터 표현현과 데이터를 조작하는 메서드들을 하나의 패키지 안에 결합한다.

EX) 주식을 나타내는 클래스를 생각해보자

한주를 기본단위로 삼고, 한 주를 표현하는 클래스를 정의하는 것이 주식을 나타내는 방법이라면 100주를 나타낼 때 100개의 객체가 필요하다.

이렇게 하지 않고 한 사람이 어떤 한 주식에 대해 가지고 있는 지분을 기본 단위로 표현할 수 있다.

이러면 소유한 주식의 수는 데이터 표현의 일부가 된다.

클래스 서술은 두 부분으로 이루어진다.

* 클래스 선언: 데이터 멤버와 public 인터페이스, (메서드라고 부르는) 멤버 함수를 이용하여 데이터 표현을 서술한다.

* 클래스 메서드 정의: 클래스 멤버 함수가 어떻게 구현되는지를 서술한다.

간단히 말하면 클래스 선언은 **클래스의 개요**를 제공, 메서드 정의는 **세부 사항**을 제공하는 것이다.

> ### 인터페이스란 무엇인가?
>
> 인터페이스는 두 시스템(ex. 컴퓨터와 프린터, 사용자와 컴퓨터 프로그램) 간의 상호 작용을 위한 공통된 프레임 워크다.
>
> 클래스와 관련해서는 public 인터페이스를 말하는데, public은 그 클래스를 사용하는 프로그램이다.
>
> 인터페이스는 그 클래스를 작성한 누군가가 제공한 메서드들로 구성되는데, 프로그래머가 클래스 객체와 상호 작용하는 코드를 작성할 수 있게 해 준다.
>
> 예를 들어 string 객체에 들어 있는 문자들의 개수는 클래스 작성자가 제공한 size() 메서드를 사용하면 된다.
>
> size() 메서드는 사용자와 string 클래스 객체 사이의 public 인터페이스의 일부이다.

전형적으로 C++11 프로그래머들은 인터페이스를 헤더 파일의 클래스 선언 안에 위치시키고 구현 부분은 소스 코드 파일의 클래스 함수들을 위한 코드 안에 위치시킨다.

다음은 이 전형적인 스타일의 Stock 클래스 선언이다.

```cpp
// stock00.h -- Stock 클래스 인터 페이스
// version 00
#ifndef STOCK00_H_
#define STOCK00_H_

#include <string>

class Stock    // 클래스 선언
{
private:
  std::string company;
  long shares;
  double share_val;
  double total_val;
  void set_tot() { total_val = shares * share_val; }
public:
  void acquire(const std::string % co, long n, double pr);
  void buy(long num, double price);
  void sell(long num, double price);
  void update(double price);
  void show();
};

#endif
```

C++ 키워드인 class는 위 코드가 클래스 설계를 위한 정의라는 사실을 나타낸다.

class가 포함된 이 구문은 Stock을 이 새로운 클래스의 데이터형 이름으로 만든다.

이 선언으로 Stock형의 변수인 객체나 인스턴스를 선언할 수 있게 된다.

```cpp
Stock sally;
Stock solly;
```

sally와 solly라는 두 개의 객체를 생성한다.

sally 객체는 Sally라는 사람이 보유하고 있는 특정 회사 주식의 지분을 나타낼 수 있다.

#### 접근 제어

private와 public이라는 키워드는 클래스 멤버에 대한 접근 제어를 서술한다.

특정 클래스의 객체를 사용하는 프로그램은 그 객체의 public 부분에는 직접 접근할 수 있다.

그러나 private 멤버에는 public 멤버 함수를 통해서만 접근할 수 있다.

EX) Stock 클래스의 shares 멤버의 값을 변경하려면 Stock 클래스의 public 멤버 함수 중의 하나를 사용해야한다.

public 멤버 함수는 객체의 private 멤버와 프로그램을 잇는 다리 역할을 한다는 것이다.

이와 같이 프로그램이 데이터에 직접 접근을 못하게 하는 것을 **데이터 은닉**이라 한다.

클래스 설계는 public 인터페이스와 세부적인 구현을 분리한다.

public 인터페이스는 설계의 추상화를 나타낸다.

세부적인 구현들을 따로 결합하여 추상화와 분리하는 것을 **캡슐화**라고 한다.

EX) Stock 클래스가 set_tot()를 가지고 하는 것처럼 기능적인 세부 구현을 private 부분에서 은닉하고 있는데 이는 데이터 은닉이자 캡슐화의 한 예이다.

```cpp
class Stock    // 키워드 class는 클래스 정의임을 나타냄
{
private:  // private는 public 멤버 함수를 통해서만 접근할 수 있는 클래스 멤버(데이터 은닉)
  std::string company;
  long shares;
  double share_val;
  double total_val;
  void set_tot() { total_val = shares * share_val; }

public:  // public은 그 클래스의 public 인터페이스를 구성하는 클래스 멤버(추상화)
  void acquire(const std::string % co, long n, double pr);
  void buy(long num, double price);
  void sell(long num, double price);
  void update(double price);
  void show();
};
```

642p
